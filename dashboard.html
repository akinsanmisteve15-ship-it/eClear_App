<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>eClear Global | Control Room</title>
    <style>
        :root { --bg: #050505; --card: #111; --blue: #0000FF; --gold: #FFD700; --green: #00FF00; --text: #eee; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 280px; background: #000; border-right: 1px solid #222; padding: 30px; }
        .city-btn { display: block; width: 100%; padding: 12px; margin-bottom: 10px; background: #111; border: 1px solid #222; color: #888; text-align: left; cursor: pointer; border-radius: 6px; font-weight: 600; }
        .city-btn.active { border-color: var(--blue); color: #fff; background: rgba(0,0,255,0.1); }

        /* Main Content */
        .main { flex: 1; padding: 50px; overflow-y: auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        
        /* Tier Badges */
        .tier { padding: 4px 12px; border-radius: 4px; font-size: 11px; font-weight: 800; text-transform: uppercase; }
        .tier-reservation { color: var(--gold); border: 1px solid var(--gold); background: rgba(255,215,0,0.1); }
        .tier-paid { color: var(--green); border: 1px solid var(--green); background: rgba(0,255,0,0.1); }
        .tier-free { color: #888; border: 1px solid #444; }

        table { width: 100%; border-collapse: collapse; background: var(--card); border-radius: 12px; overflow: hidden; }
        th { text-align: left; padding: 20px; color: #555; font-size: 12px; text-transform: uppercase; border-bottom: 1px solid #222; }
        td { padding: 20px; border-bottom: 1px solid #222; font-size: 14px; }
        
        .btn-approve { background: var(--blue); color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: 600; }
        .btn-approve:hover { filter: brightness(1.2); }
    </style>
</head>
<body>

    <aside class="sidebar">
        <h2 style="color:var(--blue); margin-bottom:40px;">eClear</h2>
        <p style="font-size:10px; color:#555; text-transform:uppercase; margin-bottom:15px;">Global Hubs</p>
        <button class="city-btn active" onclick="filterCity('Lagos')">Lagos, NG</button>
        <button class="city-btn" onclick="filterCity('London')">London, UK</button>
        <button class="city-btn" onclick="filterCity('Dubai')">Dubai, UAE</button>
        <button class="city-btn" onclick="filterCity('NYC')">New York, US</button>
    </aside>

    <main class="main">
        <div class="header">
            <div>
                <h1 id="current-city-title">Lagos Discovery</h1>
                <p style="color:#666;">Global Ingestor Active: Eventbrite, PredictHQ, SerpApi</p>
            </div>
            <button onclick="location.reload()" style="background:#222; color:white; border:none; padding:10px 20px; border-radius:6px; cursor:pointer;">SYNC ALL APIS</button>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Event</th>
                    <th>Financial Tier</th>
                    <th>Source</th>
                    <th style="text-align:right;">Action</th>
                </tr>
            </thead>
            <tbody id="event-list">
                </tbody>
        </table>
    </main>

    <script>
        async function loadEvents(city = 'Lagos') {
            document.getElementById('current-city-title').innerText = city + " Discovery";
            const response = await fetch('global_leads.json');
            const data = await response.json();
            const list = document.getElementById('event-list');
            list.innerHTML = '';

            // Filter data by city and render
            data.filter(e => e.city === city || city === 'Global').forEach(event => {
                const tierClass = `tier-${event.financial_tier.toLowerCase().replace('/', '-')}`;
                list.innerHTML += `
                    <tr>
                        <td>
                            <div style="font-weight:700;">${event.title}</div>
                            <div style="font-size:12px; color:#666;">${event.venue} • ${event.date}</div>
                        </td>
                        <td><span class="tier ${tierClass}">${event.financial_tier}</span></td>
                        <td><a href="${event.url}" target="_blank" style="color:var(--blue); text-decoration:none; font-size:12px;">${event.source} ↗</a></td>
                        <td style="text-align:right;"><button class="btn-approve">APPROVE</button></td>
                    </tr>
                `;
            });
        }

        function filterCity(city) {
            document.querySelectorAll('.city-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            loadEvents(city);
        }

        window.onload = () => loadEvents('Lagos');
    </script>
</body>
</html>